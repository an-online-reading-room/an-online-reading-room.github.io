import{Z as T}from"./vendor-64152532.js";import{a as y}from"./leaflet-src-2497c0f6.js";function E(e,i){return i.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(s){if(s!=="default"&&!(s in e)){var n=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,n.get?n:{enumerable:!0,get:function(){return t[s]}})}})}),Object.freeze(e)}var g={exports:{}};(function(e){e.console||(e.console={});for(var i=e.console,t,s,n=function(){},a=["memory"],r="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=a.pop();)i[t]||(i[t]={});for(;s=r.pop();)typeof i[s]!="function"&&(i[s]=n)})(typeof window=="undefined"?T:window);var R={exports:{}};(function(e){function i(t,s,n){var a=!1;if(typeof window.XMLHttpRequest=="undefined")return s(Error("Browser not supported"));if(typeof n=="undefined"){var r=t.match(/^\s*https?:\/\/[^\/]*/);n=r&&r[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var l=new window.XMLHttpRequest;function c(u){return u>=200&&u<300||u===304}if(n&&!("withCredentials"in l)){l=new window.XDomainRequest;var h=s;s=function(){if(a)h.apply(this,arguments);else{var u=this,v=arguments;setTimeout(function(){h.apply(u,v)},0)}}}function f(){l.status===void 0||c(l.status)?s.call(l,null,l):s.call(l,l,null)}return"onload"in l?l.onload=f:l.onreadystatechange=function(){l.readyState===4&&f()},l.onerror=function(v){s.call(this,v||!0,null),s=function(){}},l.onprogress=function(){},l.ontimeout=function(u){s.call(this,u,null),s=function(){}},l.onabort=function(u){s.call(this,u,null),s=function(){}},l.open("GET",t,!0),l.send(null),a=!0,l}e.exports=i})(R);function x(e,i,t){var s,n,a,r=null,l=0;t||(t={});var c=function(){l=t.leading===!1?0:new Date().getTime(),r=null,a=e.apply(s,n),r||(s=n=null)};return function(){var h=new Date().getTime();!l&&t.leading===!1&&(l=h);var f=i-(h-l);return s=this,n=arguments,f<=0||f>i?(r&&(clearTimeout(r),r=null),l=h,a=e.apply(s,n),r||(s=n=null)):!r&&t.trailing!==!1&&(r=setTimeout(c,f)),a}}var b=x;function S(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}var D=S,o=y.exports,U=R.exports,w=b,C=D,P="1.9.4",L=1,I=20,O=4,k=20,A=250,N={INPUT_PLACEHOLDER:"Search",INPUT_TITLE_ATTRIBUTE:"Search",RESET_TITLE_ATTRIBUTE:"Reset",NO_RESULTS:"No results were found.",ERROR_403:"A valid API key is needed for this search feature.",ERROR_404:"The search service cannot be found. :-(",ERROR_408:"The search service took too long to respond. Try again in a second.",ERROR_429:"There were too many requests. Try again in a second.",ERROR_500:"The search service is not working right now. Please try again later.",ERROR_502:"Connection lost. Please try again later.",ERROR_DEFAULT:"The search service is having problems :-("},M=o.Control.extend({version:P,includes:o.Evented?o.Evented.prototype:o.Mixin.Events,options:{position:"topleft",attribution:'Geocoding by <a href="https://geocode.earth">Geocode.earth</a>',url:"https://api.geocode.earth/v1",placeholder:null,bounds:!1,focus:!0,layers:null,panToPoint:!0,pointIcon:!0,polygonIcon:!0,fullWidth:650,markers:!0,overrideBbox:!1,expanded:!1,autocomplete:!0,place:!1,textStrings:N},initialize:function(e,i){if(window.XDomainRequest&&(this.options.url="//api.geocode.earth/v1"),typeof e=="object"&&!!e?i=e:this.apiKey=e,i&&typeof i.latlng!="undefined"&&(typeof i.focus=="undefined"&&(i.focus=i.latlng),console.warn("[leaflet-geocoder-mapzen] DEPRECATION WARNING:","As of v1.6.0, the `latlng` option is deprecated. It has been renamed to `focus`. `latlng` will be removed in a future version.")),i&&typeof i.title!="undefined"&&(i.textStrings=i.textStrings||{},i.textStrings.INPUT_TITLE_ATTRIBUTE=i.title,console.warn("[leaflet-geocoder-mapzen] DEPRECATION WARNING:","As of v1.8.0, the `title` option is deprecated. Please set the property `INPUT_TITLE_ATTRIBUTE` on the `textStrings` option instead. `title` will be removed in a future version.")),i&&typeof i.placeholder!="undefined"&&(i.textStrings&&typeof i.textStrings.INPUT_PLACEHOLDER!="undefined"||(i.textStrings=i.textStrings||{},i.textStrings.INPUT_PLACEHOLDER=i.placeholder)),i&&typeof i.textStrings=="object")for(var t in this.options.textStrings)typeof i.textStrings[t]=="undefined"&&(i.textStrings[t]=this.options.textStrings[t]);o.Util.setOptions(this,i),this.markers=[];var s="//search.mapzen.com";this.options.url.indexOf(s)>-1&&console.warn("Mapzen is shutting down its services including Search. Read more at https://mapzen.com/blog/shutdown. To learn more about Pelias, the open-source geocoder that powers Mapzen Search, and the Pelias team\u2019s plan for the future, please visit http://pelias.io.")},reset:function(){this._input.value="",o.DomUtil.addClass(this._reset,"leaflet-pelias-hidden"),this.removeMarkers(),this.clearResults(),this.fire("reset")},getLayers:function(e){var i=this.options.layers;return i&&(e.layers=i),e},getBoundingBoxParam:function(e){var i=this.options.bounds;if(!i)return e;if(i===!0&&this._map)i=this._map.getBounds(),e=s(e,i);else if(typeof i=="object"&&i.isValid&&i.isValid())e=s(e,i);else if(o.Util.isArray(i)){var t=o.latLngBounds(i);t.isValid&&t.isValid()&&(e=s(e,t))}function s(n,a){return n["boundary.rect.min_lon"]=a.getWest(),n["boundary.rect.min_lat"]=a.getSouth(),n["boundary.rect.max_lon"]=a.getEast(),n["boundary.rect.max_lat"]=a.getNorth(),n}return e},getFocusParam:function(e){var i=this.options.focus;if(!i)return e;if(i===!0&&this._map){var t=this._map.getCenter();e["focus.point.lat"]=t.lat,e["focus.point.lon"]=t.lng}else if(typeof i=="object"){var s=o.latLng(i);e["focus.point.lat"]=s.lat,e["focus.point.lon"]=s.lng}return e},getParams:function(e){e=e||{},e=this.getBoundingBoxParam(e),e=this.getFocusParam(e),e=this.getLayers(e),this.apiKey&&(e.api_key=this.apiKey);var i=this.options.params;if(!i)return e;if(typeof i=="object")for(var t in i)e[t]=i[t];return e},serialize:function(e){var i="";for(var t in e)if(e.hasOwnProperty(t)){var s=e[t],n=s.toString(),a;switch(i.length&&(i+="&"),n){case"[object Array]":a=s[0].toString()==="[object Object]"?JSON.stringify(s):s.join(",");break;case"[object Object]":a=JSON.stringify(s);break;case"[object Date]":a=s.valueOf();break;default:a=s;break}i+=encodeURIComponent(t)+"="+encodeURIComponent(a)}return i},search:function(e){if(!!e){var i=this.options.url+"/search",t={text:e};this.callPelias(i,t,"search")}},autocomplete:w(function(e){if(!!e){var i=this.options.url+"/autocomplete",t={text:e};this.callPelias(i,t,"autocomplete")}},A),place:function(e){if(!!e){var i=this.options.url+"/place",t={ids:e};this.callPelias(i,t,"place")}},handlePlaceResponse:function(e){},maxReqTimestampRendered:new Date().getTime(),callPelias:function(e,i,t){i=this.getParams(i),o.DomUtil.addClass(this._search,"leaflet-pelias-loading");var s=new Date().getTime(),n=this.serialize(i),a=e+"?"+n,r=this;function l(c,h){o.DomUtil.removeClass(r._search,"leaflet-pelias-loading");var f;try{f=JSON.parse(h.responseText)}catch{c={code:500,message:"Parse Error"}}if(c){var u;switch(c.code){case 403:u=r.options.textStrings.ERROR_403;break;case 404:u=r.options.textStrings.ERROR_404;break;case 408:u=r.options.textStrings.ERROR_408;break;case 429:u=r.options.textStrings.ERROR_429;break;case 500:u=r.options.textStrings.ERROR_500;break;case 502:u=r.options.textStrings.ERROR_502;break;default:u=r.options.textStrings.ERROR_DEFAULT;break}r.showMessage(u),r.fire("error",{results:f,endpoint:e,requestType:t,params:i,errorCode:c.code,errorMessage:u})}if(f&&f.geocoding&&f.geocoding.errors){u=f.geocoding.errors[0],r.showMessage(u),r.fire("error",{results:f,endpoint:e,requestType:t,params:i,errorCode:c.code,errorMessage:u});return}if(f&&f.features){if(t==="autocomplete"||t==="search"){if(r._input.value===""||r.maxReqTimestampRendered>=s)return;r.maxReqTimestampRendered=s}t==="place"&&r.handlePlaceResponse(f),(t==="autocomplete"||t==="search")&&r.showResults(f.features,i.text),r.fire("results",{results:f,endpoint:e,requestType:t,params:i})}}U(a,l,!0)},highlight:function(e,i){var t=RegExp("("+C(i)+")","gi");return e.replace(t,"<strong>$1</strong>")},getIconType:function(e){var i=this.options.pointIcon,t=this.options.polygonIcon,s="leaflet-pelias-layer-icon-";return e.match("venue")||e.match("address")?i===!0?{type:"class",value:s+"point"}:i===!1?!1:{type:"image",value:i}:t===!0?{type:"class",value:s+"polygon"}:t===!1?!1:{type:"image",value:t}},showResults:function(e,i){if(e.length===0){this.showMessage(this.options.textStrings.NO_RESULTS);return}var t=this._results;t.innerHTML="",t.style.display="block",t.style.maxHeight=this._map.getSize().y-t.offsetTop-this._container.offsetTop-k+"px";for(var s=o.DomUtil.create("ul","leaflet-pelias-list",t),n=0,a=e.length;n<a;n++){var r=e[n],l=o.DomUtil.create("li","leaflet-pelias-result",s);l.feature=r,l.layer=r.properties.layer,l.coords=r.geometry.coordinates;var c=this.getIconType(r.properties.layer);if(c){var h=o.DomUtil.create("span","leaflet-pelias-layer-icon-container",l),f;c.type==="class"?f=o.DomUtil.create("div","leaflet-pelias-layer-icon "+c.value,h):(f=o.DomUtil.create("img","leaflet-pelias-layer-icon",h),f.src=c.value),f.title="layer: "+r.properties.layer}l.innerHTML+=this.highlight(r.properties.label,i)}},showMessage:function(e){var i=this._results;i.innerHTML="",i.style.display="block";var t=o.DomUtil.create("div","leaflet-pelias-message",i);t.appendChild(document.createTextNode(e))},removeMarkers:function(){if(this.options.markers){for(var e=0;e<this.markers.length;e++)this._map.removeLayer(this.markers[e]);this.markers=[]}},showMarker:function(e,i){this._map.setView(i,this._map.getZoom()||8);var t=typeof this.options.markers=="object"?this.options.markers:{};if(this.options.markers){var s=new o.marker(i,t).bindPopup(e);this._map.addLayer(s),this.markers.push(s),s.openPopup()}},fitBoundingBox:function(e){this._map.fitBounds([[e[1],e[0]],[e[3],e[2]]],{animate:!0,maxZoom:16})},setSelectedResult:function(e,i){var t=o.GeoJSON.coordsToLatLng(e.feature.geometry.coordinates);this._input.value=e.textContent||e.innerText;var s=e.feature.properties.layer;s!=="venue"&&s!=="address"&&e.feature.bbox&&!this.options.overrideBbox?(this.removeMarkers(),this.fitBoundingBox(e.feature.bbox)):(this.removeMarkers(),this.showMarker(e.innerHTML,t)),this.fire("select",{originalEvent:i,latlng:t,feature:e.feature}),this.blur(),this.options.place&&e.feature.properties.gid&&this.place(e.feature.properties.gid)},focus:function(){o.DomUtil.hasClass(this._container,"leaflet-pelias-expanded")||this.expand(),this._input.focus()},blur:function(){this._input.blur(),this.clearResults(),this._input.value===""&&this._results.style.display!=="none"&&(o.DomUtil.addClass(this._reset,"leaflet-pelias-hidden"),this.options.expanded||this.collapse())},clearResults:function(e){this._results.style.display="none",(this._input.value===""||e===!0)&&(this._results.innerHTML=""),this._enableMapScrollWheelZoom()},expand:function(){o.DomUtil.addClass(this._container,"leaflet-pelias-expanded"),this.setFullWidth(),this.fire("expand")},collapse:function(){o.DomUtil.removeClass(this._container,"leaflet-pelias-expanded"),this._input.blur(),this.clearFullWidth(),this.clearResults(),this.fire("collapse")},setFullWidth:function(){if(this.options.fullWidth){this._map.invalidateSize();var e=this._map.getSize().x,i=o.Browser.touch?O:0,t=e-I-i;if(typeof this.options.fullWidth=="number"&&e>=window.parseInt(this.options.fullWidth,10)){this.clearFullWidth();return}this._container.style.width=t.toString()+"px"}},clearFullWidth:function(){this.options.fullWidth&&(this._container.style.width="")},onAdd:function(e){var i=o.DomUtil.create("div","leaflet-pelias-control leaflet-bar leaflet-control");return this._body=document.body||document.getElementsByTagName("body")[0],this._container=i,this._input=o.DomUtil.create("input","leaflet-pelias-input",this._container),this._input.spellcheck=!1,o.DomEvent.addListener(this._input,"focus",function(t){this.fire("focus",{originalEvent:t})},this),o.DomEvent.addListener(this._input,"blur",function(t){this.fire("blur",{originalEvent:t})},this),this.options.textStrings.INPUT_TITLE_ATTRIBUTE&&(this._input.title=this.options.textStrings.INPUT_TITLE_ATTRIBUTE),this.options.textStrings.INPUT_PLACEHOLDER&&(this._input.placeholder=this.options.textStrings.INPUT_PLACEHOLDER),this._search=o.DomUtil.create("a","leaflet-pelias-search-icon",this._container),this._reset=o.DomUtil.create("div","leaflet-pelias-close leaflet-pelias-hidden",this._container),this._reset.innerHTML="\xD7",this._reset.title=this.options.textStrings.RESET_TITLE_ATTRIBUTE,this._results=o.DomUtil.create("div","leaflet-pelias-results leaflet-bar",this._container),this.options.expanded&&this.expand(),o.DomEvent.on(this._container,"click",function(t){this._input.focus()},this).on(this._input,"focus",function(t){this._input.value&&this._results.children.length&&(this._results.style.display="block")},this).on(this._map,"click",function(t){this.blur()},this).on(this._search,"click",function(t){o.DomEvent.stopPropagation(t),o.DomUtil.hasClass(this._container,"leaflet-pelias-expanded")?this.options.expanded===!0?this._input.focus():(o.DomUtil.addClass(this._reset,"leaflet-pelias-hidden"),this.collapse()):(this._input.value.length>0&&o.DomUtil.removeClass(this._reset,"leaflet-pelias-hidden"),this.expand(),this._input.focus())},this).on(this._reset,"click",function(t){this.reset(),this._input.focus(),o.DomEvent.stopPropagation(t)},this).on(this._input,"keydown",function(t){for(var s=this._results.querySelectorAll(".leaflet-pelias-result"),n=this._results.querySelectorAll(".leaflet-pelias-selected")[0],a,r=this,l=function(d,m){if(d&&m.panToPoint){var _=d.feature.properties.layer;_!=="venue"&&_!=="address"&&d.feature.bbox&&!m.overrideBbox?(r.removeMarkers(),r.fitBoundingBox(d.feature.bbox)):(r.removeMarkers(),r.showMarker(d.innerHTML,o.GeoJSON.coordsToLatLng(d.feature.geometry.coordinates)))}},c=function(d){var m=d.getBoundingClientRect(),_=r._results.getBoundingClientRect();m.bottom>_.bottom?r._results.scrollTop=d.offsetTop+d.offsetHeight-r._results.offsetHeight:m.top<_.top&&(r._results.scrollTop=d.offsetTop)},h=0;h<s.length;h++)if(s[h]===n){a=h;break}switch(t.keyCode){case 13:if(n)this.setSelectedResult(n,t);else{var f=(t.target||t.srcElement).value;this.search(f)}o.DomEvent.preventDefault(t);break;case 38:if(s.length===0||this._results.style.display==="none")return;n&&o.DomUtil.removeClass(n,"leaflet-pelias-selected");var u=s[a-1],p=n&&u?u:s[s.length-1];o.DomUtil.addClass(p,"leaflet-pelias-selected"),c(p),l(p,this.options),this._input.value=p.textContent||p.innerText,this.fire("highlight",{originalEvent:t,latlng:o.GeoJSON.coordsToLatLng(p.feature.geometry.coordinates),feature:p.feature}),o.DomEvent.preventDefault(t);break;case 40:if(s.length===0||this._results.style.display==="none")return;n&&o.DomUtil.removeClass(n,"leaflet-pelias-selected");var v=s[a+1],p=n&&v?v:s[0];o.DomUtil.addClass(p,"leaflet-pelias-selected"),c(p),l(p,this.options),this._input.value=p.textContent||p.innerText,this.fire("highlight",{originalEvent:t,latlng:o.GeoJSON.coordsToLatLng(p.feature.geometry.coordinates),feature:p.feature}),o.DomEvent.preventDefault(t);break}},this).on(this._input,"keyup",function(t){var s=t.which||t.keyCode,n=(t.target||t.srcElement).value;if(n.length>0?o.DomUtil.removeClass(this._reset,"leaflet-pelias-hidden"):o.DomUtil.addClass(this._reset,"leaflet-pelias-hidden"),!(s===13||s===38||s===40)){if(s===27){(n.length===0||this._results.style.display==="none")&&(this._input.blur(),!this.options.expanded&&o.DomUtil.hasClass(this._container,"leaflet-pelias-expanded")&&this.collapse()),this.clearResults(!0),o.DomUtil.removeClass(this._search,"leaflet-pelias-loading");return}n!==this._lastValue&&(this._lastValue=n,n.length>=L&&this.options.autocomplete===!0?this.autocomplete(n):this.clearResults(!0))}},this).on(this._results,"click",function(t){o.DomEvent.preventDefault(t),o.DomEvent.stopPropagation(t);var s=this._results.querySelectorAll(".leaflet-pelias-selected")[0];s&&o.DomUtil.removeClass(s,"leaflet-pelias-selected");var n=t.target||t.srcElement,a=function(){return o.DomUtil.hasClass(n,"leaflet-pelias-result")||(n=n.parentElement,n&&a()),n};a(),n&&(o.DomUtil.addClass(n,"leaflet-pelias-selected"),this.setSelectedResult(n,t))},this),this.options.fullWidth&&o.DomEvent.on(window,"resize",function(t){o.DomUtil.hasClass(this._container,"leaflet-pelias-expanded")&&this.setFullWidth()},this),o.DomEvent.on(this._results,"mouseover",this._disableMapScrollWheelZoom,this),o.DomEvent.on(this._results,"mouseout",this._enableMapScrollWheelZoom,this),o.DomEvent.on(this._map,"mousedown",this._onMapInteraction,this),o.DomEvent.on(this._map,"touchstart",this._onMapInteraction,this),o.DomEvent.disableClickPropagation(this._container),e.attributionControl&&e.attributionControl.addAttribution(this.options.attribution),i},_onMapInteraction:function(e){this.blur(),this.options.expanded||!this._input.value&&o.DomUtil.hasClass(this._container,"leaflet-pelias-expanded")&&this.collapse()},_disableMapScrollWheelZoom:function(e){!this._map.scrollWheelZoom.enabled()||(this._scrollWheelZoomEnabled=this._map.scrollWheelZoom.enabled(),this._scrollWheelZoomEnabled&&this._map.scrollWheelZoom.disable())},_enableMapScrollWheelZoom:function(e){this._scrollWheelZoomEnabled&&this._map.scrollWheelZoom.enable()},onRemove:function(e){e.attributionControl&&e.attributionControl.removeAttribution(this.options.attribution)}}),W=M;(function(e){(function(i,t){var s;if(e.exports)s=y.exports,e.exports=t(s);else{if(typeof i.L=="undefined")throw new Error("Leaflet must be loaded first");i.Geocoder=t(i.L)}})(T,function(i){var t=W;return i.Control.Geocoder=t,i.control.geocoder=function(s,n){return new i.Control.Geocoder(s,n)},t})})(g);var H=g.exports,j=Object.freeze(E({__proto__:null,[Symbol.toStringTag]:"Module",default:H},[g.exports]));export{j as i};
